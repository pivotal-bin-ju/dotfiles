#!/bin/bash

set -e -u -x

GIT_DUET_RELEASE='https://github.com/git-duet/git-duet/releases/download/0.6.0/linux_amd64.tar.gz'

sudo apt install \
  curl \
  stow \
  fish/unstable \
  fonts-powerline/testing

mkdir -p ~/bin

stow -t ~ fish
sudo chsh -s /usr/bin/fish $(whoami)

stow -t ~ git
curl -L "$GIT_DUET_RELEASE" | tar -C ~/bin -zxf -

sudo apt install neovim/testing python3-pip
sudo pip3 install pynvim
sudo update-alternatives --install /usr/bin/vi vi /usr/bin/nvim 60
sudo update-alternatives --set vi /usr/bin/nvim
sudo update-alternatives --install /usr/bin/vim vim /usr/bin/nvim 60
sudo update-alternatives --set vim /usr/bin/nvim
sudo update-alternatives --install /usr/bin/editor editor /usr/bin/nvim 60
sudo update-alternatives --set editor /usr/bin/nvim

sudo apt install golang-1.12/unstable
vim --headless +GoInstallBinaries +qa
